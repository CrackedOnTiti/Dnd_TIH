<!DOCTYPE html>
<html>
<head>
    <title>D&D Session</title>
</head>
<body>
    <h1>D&D Session Tool</h1>

    <h2>Host Login</h2>
    <input type="password" id="hostPassword" placeholder="Enter host password">
    <button onclick="loginHost()">Host</button>
    <p id="hostError" style="color: red;"></p>

    <hr>

    <h2>Player</h2>
    <button onclick="window.location.href='/player/create'">Create Player</button>
    <br><br>
    <label>Load Player (JSON file):</label>
    <input type="file" id="playerFile" accept=".json">
    <button onclick="loadPlayer()">Load Player</button>

    <script>
        function loginHost() {
            const password = document.getElementById('hostPassword').value;
            if (password === '2251') {
                window.location.href = '/host';
            } else {
                document.getElementById('hostError').textContent = 'Wrong password';
            }
        }

        function loadPlayer() {
            const fileInput = document.getElementById('playerFile');
            if (!fileInput.files[0]) {
                alert('Please select a file');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const playerData = JSON.parse(e.target.result);
                    // Store in localStorage and redirect to player page
                    localStorage.setItem('playerData', JSON.stringify(playerData));
                    window.location.href = '/player';
                } catch (err) {
                    alert('Invalid JSON file');
                }
            };
            reader.readAsText(fileInput.files[0]);
        }
    </script>
</body>
</html>
